<!DOCTYPE html>
<html lang="en">
<head>
  <title>Handbook of Special Relativity</title>
  <meta name="keywords" content="..."> <!-- #todo -->
  <meta name="description" content="..."><!-- #todo -->
  <meta name="author" content="Phy-Hub">

  <link rel="icon" type="image/png" href="../favicons/favicon-96x96.png" sizes="96x96" >
  <link rel="icon" type="image/svg+xml" href="../favicons/favicon.svg" >
  <link rel="shortcut icon" href="../favicons/favicon.ico" >
  <link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon.png" >
  <meta name="apple-mobile-web-app-title" content="Phy-Hub" >
  <link rel="manifest" href="../favicons/site.webmanifest" >

  <!--<script> var url = window.location.href; url = url.split('.html')[0]; window.history.replaceState(null, null, url); </script> -->
  <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js" integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
  <script defer async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
  <script defer src="https://cdn.jsdelivr.net/gh/pcooksey/bibtex-js@1.0.0/src/bibtex_js.min.js"></script>
  <!--<script defer> window.MathJax = {  tex: { tags: 'ams' }, svg: {fontCache: 'global'} }; </script>-->
  <script> MathJax = {
    loader:  {load:  ['[tex]/tagformat']},
    section:  0,
    tex:  {
      tags:  'ams',
      packages:  {'[+]':  ['tagformat', 'sections']},
      tagformat:  { number:  (n) => MathJax.config.section + '.' + n }
    },
    startup:  {
      ready() {
        const Configuration = MathJax._.input.tex.Configuration.Configuration;
        const CommandMap = MathJax._.input.tex.SymbolMap.CommandMap;
        new CommandMap('sections', { nextSection:  'NextSection' }, {
          NextSection(parser, name) {
            MathJax.config.section++;
            parser.tags.counter = parser.tags.allCounter = 0;
          }
        });
        Configuration.create( 'sections', {handler:  {macro:  ['sections']}});
        MathJax.startup.defaultReady();
      }
    }
  };
  </script>

<style>
  :root {--navbar-height: 60px;}
  .note {
      text-align: center;
      font-style: italic;
      font-size: 0.9rem;
      margin: 1em 40px;
      color: #555;
  }
  .derivation {
      color: gray;
      border: solid gray;
      border-width: 0 3px;
      padding: 10px;
      margin: 20px 0;
  }
  .derivation::before {
      content: "derivation:";
      display: block;
      font-weight: bold;
      text-decoration: underline;
      margin-bottom: 10px;
  }

  /* ### BIB ######################################################## */
  /* 1. Main Container & Font Settings */
  .bibliography-list {
    font: 1rem "Times New Roman", Times, serif;
    line-height: 1.2;
    padding-left: 2.5em; /* Space for the numbers */
  }

  /* 2. List Item Spacing */
  .bibliography-list li {
    margin-bottom: 0.5em;
    padding-left: 0.5em; /* Gap between the number and the text */
  }

  /* 3. The Numbering (The Modern Way) */
  .bibliography-list li::marker {
    content: "[" counter(list-item) "]"; /* Automatically adds brackets */
    font-weight: bold; /* Optional: makes [1] bold */
  }

  /* 4. Link & URL Styling (Condensed) */
  .bibliography-list a { color: inherit; text-decoration: none; }
  .bib-url { font-family: "Courier New", monospace; word-break: break-all; font-size: 0.9rem;}
  .bib-url:hover { text-decoration: underline; }

  .citation-link {color: inherit;}
  /* ############################################################### */

  .strongyellow{background-color: #f6da66;}
  .yellow{background-color: #fff8bb;}
  .brown{background-color: #b7a484;}
  .stronger-colour{background-color: #fccb93;}

  dt:hover {background-color: #ddb400;}
  dd {margin-left: 0;}
  #dictionary > dd {padding: 10px;}

  span:hover {background-color: #ddb400; cursor: default;}
  h1 span:hover, p span:hover {background-color: transparent; cursor: default;}

  .navbar {
    display: grid; grid-template-columns: auto 680px auto;
    position: sticky; top: 0; z-index: 1000;
    height: var(--navbar-height); width: 100%;
    background-color: grey;
  }

  #site-navbar {
    position: sticky;
    top: 0;
    z-index: 1000;
    width: 100%;
  }

  .arrow-nav {
    display: grid; grid-template-columns: 50% 50%;
    width: 100%;
    padding-top: 50px;
  }

  h2 {font-size: 1.7em;}
  h3 {font-size: 1.5em;}
  h4 {font-size: 1.2em;}
  h5 {font-size: 1em;}
  #toc_container a:hover {text-decoration: underline;}
  #toc_container a {
  font-size: 0.8rem;
  color: black;
  padding: 0;
  padding-left: 0px;
  padding-right: 10px;
  font-family: Arial, sans-serif;
  line-height: 1.1;
  text-decoration: none;
  display: inline-block;
  }
  #toc_container li {line-height: 1.1;}
  section a {color: black; text-decoration: none;}
  section a:hover {text-decoration: underline; background-color: #ddb400; cursor: pointer;}

  :target:before {content: ""; display: block; height: 65px; margin-top: -65px; visibility: hidden;}

  main {display: grid; grid-template-columns: 1fr 700px 1fr;}
  main > * {padding: 20px;}
  @media (max-width: 900px) {
    #tocsidebar {display: none;}
    .sidebar {display: none;}
    main { grid-template-columns: 100%;}
    .navbar {grid-template-columns: 70px auto 70px;}
    @media (max-width: 700px) {article {min-width: 0px; width: 100vw; margin: 0;}}
  }
  body {counter-reset: figure-counter chapter-counter;}
  section { counter-increment: chapter-counter; counter-reset: figure-counter; }

  #tocsidebar{position: sticky; top: var(--navbar-height); overflow: hidden; align-self: start; height: auto;  padding-left: 10px;}
  .sidebar{position: sticky; top: var(--navbar-height); overflow: hidden; align-self: start; height: auto;}
    figcaption {line-height: 1.2; font-size: 0.85em; margin-top: 10px;}

  .dropdown-menu {
    display: none;
    position: absolute;
    right: 0;
    top: 100%;
    background-color: grey;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;}
  .dropdown-menu a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;}
  .dropdown-menu a:hover {background-color: rgb(90, 90, 90)}
  .menu:hover .dropdown-menu {display: block;}
</style>

<style>
      .toc-arrow { display:inline-block; margin-right:0px; color:#555; transition: transform 0.2s; }
      .toc-active .toc-arrow { transform: rotate(90deg); }
      .toc-link { text-decoration:none; color:inherit; display:block; padding:2px 0; cursor:pointer; }
      .toc-link:hover { color:#000; }
      .toc-sublist { display:none; list-style:none; padding-left:10px; }

      .math { font-size: smaller; }
      mjx-container:not([display]) {font-size: smaller !important;}
      .math:hover {background-color: #ddb400; cursor: help;}
</style>

<style>
  @font-face {
      font-family: 'TG Schola';
      src: url('../fonts/texgyreschola-regular.woff2') format('woff2'), url('../fonts/texgyreschola-regular.woff') format('woff');
      font-weight: normal;
      font-style: normal;
  }
  @font-face {
      font-family: 'TG Schola';
      src: url('../fonts/texgyreschola-bold.woff2') format('woff2'), url('../fonts/texgyreschola-bold.woff') format('woff');
      font-weight: bold;
      font-style: normal;
  }
  @font-face {
      font-family: 'TG Schola';
      src: url('../fonts/texgyreschola-italic.woff2') format('woff2'), url('../fonts/texgyreschola-italic.woff') format('woff');
      font-weight: normal;
      font-style: italic;
  }
  @font-face {
      font-family: 'TG Schola';
      src: url('../fonts/texgyreschola-bolditalic.woff2') format('woff2'), url('../fonts/texgyreschola-bolditalic.woff') format('woff');
      font-weight: bold;
      font-style: italic;
  }
  body {font-family: 'TG Schola', 'Century Schoolbook', 'New Century Schoolbook', Georgia, serif;}

  .chapter_header {scroll-margin-top: var(--navbar-height);}
  .part_header {scroll-margin-top: var(--navbar-height);}

  figure {counter-increment: figure-counter; margin-inline: 0;}
  .singlefigure {width: 80%; margin-inline: auto;}
  .singlefigure img {display: block; margin-inline: auto; width: 100%; height: auto; max-height: 300px;}
  .subfigures {width: 95%; margin-inline: auto;}
  .subfigures div {display: flex; justify-content: space-between; gap: 15px; align-items: flex-end; width: 100%;}
  .subfigures > div > figure {flex: 1; margin: 0; padding: 0; min-width: 0;}
  .subfigures img {width: 100%; height: auto; display: block; max-height: 200px; margin-inline: auto;}
  .subfigures > figcaption {width: 95%; margin-inline: auto;}
  .subfigure figcaption {text-align: center;}

  /* #note: animated figures #### */
  dialog#universalModal {
    width: 75vw;
    height: 75vh;
    border: none;
    border-radius: 12px;
    padding: 0;
    background: transparent;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    overflow: hidden;
  }

  dialog#universalModal::backdrop {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(8px);
  }

  dialog#universalModal iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
      background: #2a2a2a; /* Generic dark background */
  }

  .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      width: 35px;
      height: 35px;
      background: #ff2222;
      color: white;
      border: none;
      border-radius: 50%;
      font-weight: bold;
      cursor: pointer;
      z-index: 10;
  }
  .close-btn:hover { background: #cc0000; }
  .fig-button {border-radius: 4px; padding: 0px; padding-left: 2px; padding-right: 2px; margin: 0; background-color: #fccb93;}
  .fig-button:hover {text-decoration: underline; background-color: #ddb400; cursor: pointer;}

</style>
</head>

<body style="margin: 0; background-color:#ffe4c8; ">
  <header id="site-navbar">
    <!--Navbar-->
    <div class="navbar">
      <div style="justify-self: start; width: 70px;"><a href="/index.html"> <img src="media/Logo/Logo_2.png" alt="Logo" style="height: 50px; padding-top: 6px; padding-left: 10px" > </a></div>
      <div id="banner" style="width: 100%; padding-top: 3px; padding-bottom:3px;"> </div>
      <div class="menu" style="justify-self: end; cursor: pointer; width: 70px;">
        <div style="font-size: 40px; text-align: right; padding-right: 10px; "> &#x2630; </div>
        <nav class="dropdown-menu">
          <a href="/index.html">Home</a>
          <a href="/pages/topics.html">Topics</a>
          <a href="/pages/about.html">About</a>
        </nav>
      </div>
    </div>
  </header>

  <!--Page-->
  <main>
   <div id="equation_hover" style="position: fixed; top: var(--navbar-height); padding: 0px; padding-right: 20px; background-color:#f99830; width: 680px; left: 50%; transform: translateX(-50%); z-index: 9999;"></div>
    <div id="fig_hover" style="position: fixed; top: var(--navbar-height); padding: 0px; padding-right: 20px; padding-left: 20px; background-color:#f99830; width: 660px; left: 50%; transform: translateX(-50%); z-index: 9999;"></div>
    <!--Page Navbar-->
    <nav id="tocsidebar">
      <p style="font-size: 1.5em; font-weight: normal; margin: 0pt; padding-bottom: 0.5em;  text-align: center;"><span style="font-family: 'Computer Modern', serif; font-style: italic;">Handbook of</span>
        <span style="font-family: 'Computer Modern', serif;">
          [Insert Topic Name]
        </span>
      </p>
      <p style="font-weight: bold; font-size: 1.2em; margin: 0pt;">Contents</p>
      [Insert TOC] <!-- needs to be in seperate line for ASM.py --> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc.</p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc.</p>
      [Insert PDF Link]
      <a href="/pages/about.html" style="position: fixed; left: 10px; bottom: 10px;"> <div> About Phy-Hub</div> </a>
    </nav>

    <!--Main Content-->
    <article style=" line-height: 1.5; font-size: 20px; border-left: 10px solid rgba(128, 128, 128, 0.1); border-right: 10px solid rgba(128, 128, 128, 0.1);">

      <header style="display: flex; justify-content: center; text-align: center; font-family: 'Computer Modern Serif'; padding-top: 10px;">
        <div style="width: 50%; display: flex; flex-direction: column; align-items: center;">
            <svg style="width: 70%; height: auto; display: block;" viewBox="0 0 1918 568" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" overflow="hidden"><defs><clipPath id="clip0"><rect x="1255" y="133" width="1918" height="568"/></clipPath></defs><g clip-path="url(#clip0)" transform="translate(-1255 -133)"><path d="M1310.6 701 3117.4 701 3117.4 597.727 3173 597.727 3173 529.206 2214 133 1255 529.206 1255 597.727 1310.6 597.727 1310.6 701Z" fill-rule="evenodd"/></g></svg>
            <h1 aria-label="Handbook of Special Relativity" style="margin: 0; padding: 0; width: 100%; display: flex; justify-content: center; font-weight: normal;">
                <svg style="width: 78%; height: auto; display: block; margin: 1% 0;" viewBox="0 0 1000 375" xmlns="http://www.w3.org/2000/svg">
                    <style>.temple-text { font-family: 'Computer Modern', serif; fill: black; text-anchor: middle; } </style>
                    <text x="50%" y="35%" class="temple-text" font-style="italic" font-size="100">Handbook of</text>
                    <text x="50%" y="75%" class="temple-text" font-size="110">
                        Special Relativity
                    </text>
                </svg>
            </h1>
            <svg style="width: 72%; height: auto; display: block; margin-top: -1%;" viewBox="0 0 2326 150" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" overflow="hidden"> <defs><filter id="fx0" x="-10%" y="-10%" width="120%" height="120%" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse"><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="discrete" tableValues="0 0"/><feFuncG type="discrete" tableValues="0 0"/><feFuncB type="discrete" tableValues="0 0"/><feFuncA type="linear" slope="0.439216" intercept="0"/></feComponentTransfer><feGaussianBlur stdDeviation="7.63889 7.63889"/></filter><clipPath id="clip1"><rect x="1051" y="1638" width="2326" height="200"/></clipPath></defs> <g clip-path="url(#clip1)" transform="translate(-1051 -1638)"><g filter="url(#fx0)" transform="matrix(2 0 0 2 1050 1638)"><g><path d="M23.7399 23.6633 1140.26 23.6633 1140.26 76.7084 23.7399 76.7084Z" fill-rule="evenodd"/></g></g><path d="M1130 1638 3298 1638 3298 1741 1130 1741Z" fill-rule="evenodd"/></g> </svg>
            <svg style="width: 80%; height: auto; display: block;" viewBox="0 0 2326 200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" overflow="hidden"><defs><filter id="fx1" x="-10%" y="-10%" width="120%" height="120%" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse"><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="discrete" tableValues="0 0"/><feFuncG type="discrete" tableValues="0 0"/><feFuncB type="discrete" tableValues="0 0"/><feFuncA type="linear" slope="0.439216" intercept="0"/></feComponentTransfer><feGaussianBlur stdDeviation="7.63889 7.63889"/></filter><clipPath id="clip2"><rect x="1051" y="1638" width="2326" height="200"/></clipPath></defs><g clip-path="url(#clip2)" transform="translate(-1051 -1638)"><g filter="url(#fx1)" transform="matrix(2 0 0 2 1050 1638)"><g><path d="M23.7399 23.6633 1140.26 23.6633 1140.26 76.7084 23.7399 76.7084Z" fill-rule="evenodd"/></g></g><path d="M1130 1638 3298 1638 3298 1741 1130 1741Z" fill-rule="evenodd"/></g></svg>
        </div>
        <!-- <div style="container-type: inline-size; width: 100%; display: flex; flex-direction: column; align-items: center;">
          <svg style="width: 70%; height: auto; display: block;" viewBox="0 0 1918 568" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" overflow="hidden"><defs><clipPath id="clip0"><rect x="1255" y="133" width="1918" height="568"/></clipPath></defs><g clip-path="url(#clip0)" transform="translate(-1255 -133)"><path d="M1310.6 701 3117.4 701 3117.4 597.727 3173 597.727 3173 529.206 2214 133 1255 529.206 1255 597.727 1310.6 597.727 1310.6 701Z" fill-rule="evenodd"/></g></svg>
          <h1 style="text-align: center; margin: 5cqw 0; font-weight: normal; line-height: 1.3;">
            <span style="display: block; font-family: 'Computer Modern', serif; font-style: italic; font-size: 7.8cqw;">Handbook of</span><span style="display: block; font-family: 'Computer Modern', serif; font-size: 8.6cqw;">
              [Insert Topic Name]
            </span>
          </h1>
          <svg style="width: 72%; height: auto; display: block; margin-top: -2cqw;" viewBox="0 0 2326 150" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" overflow="hidden"><defs><filter id="fx0" x="-10%" y="-10%" width="120%" height="120%" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse"><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="discrete" tableValues="0 0"/><feFuncG type="discrete" tableValues="0 0"/><feFuncB type="discrete" tableValues="0 0"/><feFuncA type="linear" slope="0.439216" intercept="0"/></feComponentTransfer><feGaussianBlur stdDeviation="7.63889 7.63889"/></filter><clipPath id="clip1"><rect x="1051" y="1638" width="2326" height="200"/></clipPath></defs><g clip-path="url(#clip1)" transform="translate(-1051 -1638)"><g filter="url(#fx0)" transform="matrix(2 0 0 2 1050 1638)"><g><path d="M23.7399 23.6633 1140.26 23.6633 1140.26 76.7084 23.7399 76.7084Z" fill-rule="evenodd"/></g></g><path d="M1130 1638 3298 1638 3298 1741 1130 1741Z" fill-rule="evenodd"/></g></svg>
          <svg style="width: 80%; height: auto; display: block;" viewBox="0 0 2326 200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" overflow="hidden"><defs><filter id="fx1" x="-10%" y="-10%" width="120%" height="120%" filterUnits="userSpaceOnUse" primitiveUnits="userSpaceOnUse"><feComponentTransfer color-interpolation-filters="sRGB"><feFuncR type="discrete" tableValues="0 0"/><feFuncG type="discrete" tableValues="0 0"/><feFuncB type="discrete" tableValues="0 0"/><feFuncA type="linear" slope="0.439216" intercept="0"/></feComponentTransfer><feGaussianBlur stdDeviation="7.63889 7.63889"/></filter><clipPath id="clip2"><rect x="1051" y="1638" width="2326" height="200"/></clipPath></defs><g clip-path="url(#clip2)" transform="translate(-1051 -1638)"><g filter="url(#fx1)" transform="matrix(2 0 0 2 1050 1638)"><g><path d="M23.7399 23.6633 1140.26 23.6633 1140.26 76.7084 23.7399 76.7084Z" fill-rule="evenodd"/></g></g><path d="M1130 1638 3298 1638 3298 1741 1130 1741Z" fill-rule="evenodd"/></g></svg>
        </div> -->
      </header>

      [Insert Content] <!-- needs to be in seperate line for ASM.py --> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc.</p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc.</p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc.</p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc.</p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc. Sed euismod, nunc id lacinia tincidunt, enim nunc aliquam nunc, id tincidunt nunc nunc id nunc.</p>
      <!-- <div id="partial_bib"></div> -->

      <div id="bibliography">
        [Insert Bib]
      </div>

    </article>

    <!--Sidebar-->
    <aside class="sidebar" style="overflow-y: auto; max-height: calc(100vh - 100px);">
      <!-- <a href="..." style="padding-top: 5px;"> <b> Relativity Playground </b> </a> <br>
           <a href="..." style="padding-top: 5px;"> <b> Resources </b> </a> <br> -->
        <div id="vars">
          <h3 style="cursor: pointer;" onclick="var content = this.nextElementSibling; content.style.display = content.style.display === 'none' ? 'block' : 'none';">Terms ⯆</h3>
          <div id="definition-display" class="definition-box" style="color: #555;">
            *Hover over equations for term info*
          </div>
          [Insert Math Terms] <dl id="dts_ch2" style="display: none;"><dt style="cursor: pointer;" onclick="document.getElementById('math-E').style.display = document.getElementById('math-E').style.display == 'none' ? 'inline' : 'none';"> \(E\)<b>:</b> </dt><definition id="math-E" style="display: none;">an <dt onmouseover="document.getElementById('event').style.display='block'" onmouseout="document.getElementById('event').style.display='none'">event</dt> *** might be confused with energy later ***</definition><br><dt style="cursor: pointer;" onclick="document.getElementById('math-v').style.display = document.getElementById('math-v').style.display == 'none' ? 'inline' : 'none';"> \(v\)<b>:</b> </dt><definition id="math-v" style="display: none;">is the velocity of second <dt onmouseover="document.getElementById('Reference-frame').style.display='block'" onmouseout="document.getElementById('Reference-frame').style.display='none'">reference frame</dt> relative to the first <dt onmouseover="document.getElementById('Reference-frame').style.display='block'" onmouseout="document.getElementById('Reference-frame').style.display='none'">reference frame</dt></definition><br><dt style="cursor: pointer;" onclick="document.getElementById('math-c').style.display = document.getElementById('math-c').style.display == 'none' ? 'inline' : 'none';"> \(c\)<b>:</b> </dt><definition id="math-c" style="display: none;">the speed that light travels in empty space when it is not impeded by matter and fields.</definition><br><dt style="cursor: pointer;" onclick="document.getElementById('math-gamma').style.display = document.getElementById('math-gamma').style.display == 'none' ? 'inline' : 'none';"> \(\gamma\)<b>:</b> </dt><definition id="math-gamma" style="display: none;">a relativistic factor given by \(1/\sqrt{1-v^2/c^2}\) which determines how much of an effect the <dt onmouseover="document.getElementById('transform').style.display='block'" onmouseout="document.getElementById('transform').style.display='none'">transform</dt> of the coordinates deviates from the classical transform. It is only significant at relative frame speeds close to that of light.</definition></dl>
      </div>
      <dl id="dictionary" style="position: fixed; bottom: 0; left: calc(50% + 350px + 10px); background-color: rgb(242, 218, 193); margin-right: 10px;">
        [Insert Definitions]
      </dl>
    </aside>

  </main>

<!--scripts-->
<script>

//##################
window.addEventListener('load', function() {
  fetch('media/Logo/DS_Pattern.svg')
    .then(response => response.text())
    .then(data => {
      document.getElementById('banner').innerHTML = data;
      var svgDoc = document.getElementById('banner').getElementsByTagName('svg')[0];
      svgDoc.style.height = "54px"
      var myUses = svgDoc.getElementsByTagName('use');
      var totalItems = myUses.length; // total number of items
      var totalTime = 4; // total time for all animations in seconds
      var timePerItemSlow = totalTime / 2000; // time per item for first 300 items
      var timePerItemFast = (totalTime - (timePerItemSlow * 200)) / (totalItems - 100); // time per item for remaining items
      for (var i = 0; i < myUses.length; i++) {
        myUses[i].style.opacity = 0;
        if (i < 300) {
          myUses[i].style.transition = `opacity 0s`;
          myUses[i].style.transitionDelay = `${i * timePerItemSlow}s`; // Set a different delay for each use
        } else {
          myUses[i].style.transition = `opacity 0s`;
          myUses[i].style.transitionDelay = `${(i - 300) * timePerItemFast + 300 * timePerItemSlow}s`; // Set a different delay for each use
        }
      }
      setTimeout(function() {
        for (var i = 0; i < myUses.length; i++) {
          myUses[i].style.opacity = 1;
        }
      }, 0);
    });
});

//##################
function showContent(divId) {

  $(document).ready(function() {
    // Hide all divs with class 'chapter'
    $(".chapter").attr("style", "display: none");
    // Show the div with id 'divId'
    $("#" + divId).attr("style", "display: block");
  });

  window.scrollTo(0,0);
}

//##################
function resizeSVGImages() {
  var images = document.getElementsByClassName('resizable-svg-img');
  var resizeFactor = 0.3;

  for (var i = 0; i < images.length; i++) {
      var img = images[i];
      var tempImg = new Image();
      tempImg.src = img.src;

      tempImg.onload = (function(img) {
          return function() {
              var originalWidth = this.naturalWidth;
              var newWidth = originalWidth * resizeFactor;

              img.style.width = '650px';
          };
      })(img);
  }
}

//##################
// could replace targetId with 'fig_hover' but would need to change parser
function copyContent(sourceId, targetId) {
  var sourceDiv = document.getElementById(sourceId);
  var targetDiv = document.getElementById(targetId);
  // Clear the target div first (good practice, in case it had something)
  targetDiv.innerHTML = '';

  // Create a deep clone of the source div's content.  Crucially important!
  var clonedContent = sourceDiv.cloneNode(true);

  // Remove the ID from the cloned content to prevent duplicate IDs
  clonedContent.removeAttribute("id");

  // Style the *images* (or other elements) within the cloned content.
  var images = clonedContent.getElementsByTagName('img'); // Get all images
  for (var i = 0; i < images.length; i++) {
    images[i].style.maxHeight = "40vh";  // Limit height to 100% of container
    images[i].style.maxWidth = "100%";   // Limit width to 100% of container
    images[i].style.height = "auto";    // Maintain aspect ratio
    images[i].style.width = "auto";     // Maintain aspect ratio
    images[i].style.objectFit = "contain"; // Important: Ensure the entire image is visible
  }

  // Append the styled, cloned content to the target div.
  targetDiv.appendChild(clonedContent);
}

//##################
function deleteContent(id) {
  var myDiv = document.getElementById(id);
  myDiv.innerHTML = ''; // Delete the content
}

//##################
// --- Initialization on Page Load ---
window.addEventListener('DOMContentLoaded', () => {
  const hash = window.location.hash; // e.g. "#part_2_ch3_header"

  if (hash) {
    // 1. Find the target element (the header)
    const targetElement = document.querySelector(hash);

    if (targetElement) {
      // 2. Find the parent wrapper (e.g. id="part_2_ch3_wrap")
      const wrapper = targetElement.closest('.chapter');

      if (wrapper) {
        // 3. Extract the ID needed for toggleView (remove "_wrap")
        // e.g. "part_2_ch3_wrap" -> "part_2_ch3"
        const viewId = wrapper.id.replace('_wrap', '');

        // 4. Trigger the view
        toggleView(viewId);

        // 5. Scroll to the specific header after a slight delay
        // (to ensure the div is visible first)
        setTimeout(() => {
          targetElement.scrollIntoView();
        }, 10);

        return; // Exit so we don't load the default Part 1
      }
    }
  }

  // Default behavior: If no valid hash, load Part 1
  const firstPartLink = document.querySelector('.toc-part-link');
  if (firstPartLink) {
      const partId = firstPartLink.getAttribute('onclick').match(/'([^']+)'/)[1];
      toggleView(partId);
  }
});

function toggleView(id) {
    // 1. Hide all Content Sections
    const allWrappers = document.querySelectorAll('[id$="_wrap"]');
    allWrappers.forEach(el => el.style.display = 'none');

    // 2. Reset TOC Styles
    // Hide all sublists (TOC dropdowns)
    const allSublists = document.querySelectorAll('.toc-sublist');
    allSublists.forEach(el => el.style.display = 'none');

    // Remove active class from all links
    const allLinks = document.querySelectorAll('.toc-link');
    allLinks.forEach(el => el.classList.remove('toc-active'));

    // 3. Show the Targeted Content (Initially show what was clicked)
    const targetWrap = document.getElementById(id + '_wrap');
    if (targetWrap) {
        targetWrap.style.display = 'block';
    }

    // 4. Synchronize the TOC
    const activeLink = document.querySelector(`a[onclick="toggleView('${id}')"]`);

    if (activeLink) {
        // Mark this link as active
        activeLink.classList.add('toc-active');

        // CASE A: It is a Chapter Link (Child)
        const parentList = activeLink.closest('.toc-part-sublist');
        if (parentList) {
            parentList.style.display = 'block'; // Keep parent list open

            // Highlight the parent Part link as well
            const parentLi = parentList.parentElement;
            const partLink = parentLi.querySelector('.toc-part-link');
            if (partLink) {
                partLink.classList.add('toc-active');
            }
        }

        // CASE B: It is a Part Link (Parent)
        const siblingList = activeLink.nextElementSibling;
        if (siblingList && siblingList.classList.contains('toc-sublist')) {
            siblingList.style.display = 'block'; // Open the list

            // --- REVISED LOGIC TO AUTO-LOAD FIRST CHAPTER WITHOUT .click() ---
            if (activeLink.classList.contains('toc-part-link')) {
                const firstChapter = siblingList.querySelector('.toc-chapter-link');

                if (firstChapter) {
                    // 1. Extract the ID from the onclick string: "toggleView('part_1_ch1')"
                    const onClickStr = firstChapter.getAttribute('onclick');
                    const match = onClickStr.match(/'([^']+)'/);

                    if (match && match[1]) {
                        const chapterId = match[1];
                        const chapterWrap = document.getElementById(chapterId + '_wrap');

                        if (chapterWrap) {
                            // Hide the Part wrapper we just showed in Step 3
                            //if (targetWrap) targetWrap.style.display = 'none';

                            // Show the Chapter wrapper instead
                            chapterWrap.style.display = 'block';

                            // Highlight the chapter link
                            firstChapter.classList.add('toc-active');

                            // Open the chapter's sublist (sections) if it exists
                            const chapterSubList = firstChapter.nextElementSibling;
                            if (chapterSubList && chapterSubList.classList.contains('toc-sublist')) {
                                chapterSubList.style.display = 'block';
                            }
                        }
                    }
                }
            }
        }
    }
    // 5. Scroll to top
    window.scrollTo(0, 0);
}

// Helper for syncing TOC from footer nav

function syncToc(tocId) {
  let targetId = tocId.replace('_toc', '');
  toggleView(targetId);
}

//#####
document.addEventListener('DOMContentLoaded', () => {
  const displayBox = document.getElementById('definition-display');
  const glossary = document.getElementById('math-glossary');
  const equations = document.querySelectorAll('.math');

  function getDefinitionItem(termKey) {
    const dt = glossary.querySelector(`dt[data-term="${termKey}"]`);
    if (dt && dt.nextElementSibling) {
      // Return a list item (<li>) for the display list
      return `<li><strong>${dt.innerHTML}</strong>${dt.nextElementSibling.innerHTML}</li>`;
    }
    return '';
  }

  equations.forEach(eq => {
    eq.addEventListener('mouseenter', function() {
      // 1. Get the string "force mass acceleration" and split by space
      const termKeys = this.getAttribute('data-terms').split(' ');

      // 2. Map keys to HTML list items
      const listItems = termKeys.map(key => getDefinitionItem(key)).join('');

      // 3. Inject into display box as an unordered list
      if (listItems) {
        displayBox.innerHTML = `<ul style="list-style: none; margin: 0; padding: 0;">${listItems}</ul>`;
        displayBox.classList.add('active');
      }
    });

    eq.addEventListener('mouseleave', function() {
      displayBox.innerHTML = 'Hover over the equation to see all terms defined.';
      displayBox.classList.remove('active');
    });
  });
});

// [Insert Script]

</script>

<!-- ########### -->
<!-- #note: Fig overlay -->
<!-- ########### -->
<dialog id="universalModal">
    <button id="closeBtn" class="close-btn" aria-label="Close">✕</button>
    <iframe id="universalFrame" title="Simulation Viewer"></iframe>
</dialog>

<script>

const dialog = document.getElementById('universalModal');
const iframe = document.getElementById('universalFrame');
const closeBtn = document.getElementById('closeBtn');

// 1. Select ALL buttons with the class "fig-button"
const buttons = document.querySelectorAll('.fig-button');

// 2. Loop through them and add click listeners
buttons.forEach(button => {
    button.addEventListener('click', () => {
        // Get the specific file path from the data-src attribute
        const fileToLoad = button.getAttribute('data-src');

        // Load it into the iframe
        iframe.src = fileToLoad;

        // Open the modal
        dialog.showModal();
    });
});

// 3. Close Logic
closeBtn.addEventListener('click', () => {
    dialog.close();
    // IMPORTANT: Clear source to stop the simulation loop and save performance
    iframe.src = '';
});

// Close when clicking background
dialog.addEventListener('click', (e) => {
    const rect = dialog.getBoundingClientRect();
    if (e.clientX < rect.left || e.clientX > rect.right ||
        e.clientY < rect.top || e.clientY > rect.bottom) {
        dialog.close();
        iframe.src = ''; // Clear source here too
    }
});

</script>
</body>
</html>
